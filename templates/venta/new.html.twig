{% extends 'base.html.twig' %}
{% form_theme form 'bootstrap_5_layout.html.twig' %}

{% block title %}SisVentas - Ventas{% endblock %}
{% block bodytitle %}Nueva Venta{% endblock %}

{% block body %}
    {#{ form(form) }#}

    {{ form_start(form) }}
    {{ form_row(form.cliente) }}
    {{ form_row(form.Factura) }}
    {{ form_row(form.Fecha) }}
    
    <h3 style="display: inline">Productos</h3>
    <button type="button" class="btn btn-success btn-sm add_item_link" data-collection-holder-class="detalles"><i class="bi bi-plus-circle"></i> Agregar</button>
    	<table class="table table-striped table-sm">
		<thead>
			<tr>
				<th>Producto</th>
				<th>Cantidad</th>
                                <th></th>
			</tr>
		</thead>
		<tbody class="detalles" data-index="{{ form.detalles|length > 0 ? form.detalles|last.vars.name + 1 : 0 }}"
    data-prototype="<td>{{ form_row(form.detalles.vars.prototype.producto)|e('html_attr') }}</td><td>{{ form_row(form.detalles.vars.prototype.Cantidad)|e('html_attr') }}</td>">
        
        {% for detalle in form.detalles %}
            <tr>
                <td style="width: 80%">{{ form_row(detalle.producto) }}</td>
                <td style="width: 15%">{{ form_row(detalle.Cantidad) }}</td>
            </tr>
        {% endfor %}
    </tbody>
    </table>
    {{ form_end(form) }}

    <a href="{{ path('app_venta') }}" class="btn btn-secondary">Volver</a>

    {% for message in app.flashes('success') %}
        <div class="alert alert-success">
            {{ message }}
        </div>
    {% endfor %}

{% endblock %}
